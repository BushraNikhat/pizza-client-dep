(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),r=c(28),n=c.n(r),l=(c(97),c(98),c(99),c(172)),i=c(173),o=c(178),d=c(5),j=c(13),b=c(0),m=function(){var e=Object(j.c)((function(e){return e.cartReducer.totalQty})),t=JSON.parse(localStorage.getItem("document")),c=function(){localStorage.clear(),window.location.reload()};return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid nav p-0",children:Object(b.jsx)("div",{className:"row flex-grow-1 g-0",children:Object(b.jsx)("div",{className:" col-10 mx-auto",children:Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsxs)(d.b,{className:"navbar-brand",to:"/",children:[Object(b.jsx)("img",{src:"/assests/images/header.png",alt:"",className:"me-2"}),"pizzaHub"]}),Object(b.jsx)(o.a,{className:"navbar-toggler ",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)(l.a,{})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(b.jsxs)("ul",{className:"navbar-nav ms-auto text-end",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{exact:!0,to:"/",className:"nav-link",activeStyle:{fontWeight:"bold"},children:"Menu"})}),t?"admin"===t.role?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/order",activeStyle:{fontWeight:"bold"},children:"Orders"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/login",activeStyle:{fontWeight:"bold"},onClick:c,children:"Logout"})})," "]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/orders",activeStyle:{fontWeight:"bold"},children:"My Orders"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/login",activeStyle:{fontWeight:"bold"},onClick:c,children:"Logout"})}),Object(b.jsx)("li",{className:"nav-item ",children:Object(b.jsxs)(d.b,{className:"nav-link px-3 py-1",to:"/cart",activeStyle:{fontWeight:"bold"},children:[Object(b.jsx)("span",{className:" pe-1",children:0===e?"":e}),Object(b.jsx)(i.a,{})]})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/register",activeStyle:{fontWeight:"bold"},children:"Register"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(d.b,{className:"nav-link",to:"/login",activeStyle:{fontWeight:"bold"},children:"Login"})})]})]})})]})})})})})})},u=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("header",{className:"header container-fluid",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-10 mx-auto py-5 px-0",children:Object(b.jsxs)("div",{className:"row item_container g-0",children:[Object(b.jsxs)("div",{className:"col-6 item_left item p-0 ",children:[Object(b.jsx)("h6",{children:Object(b.jsx)("em",{children:"Are you hungry?"})}),Object(b.jsx)("h1",{className:"fw-bold",children:"Don't wait !"}),Object(b.jsx)(o.a,{variant:"contained",className:"btn",children:Object(b.jsx)("a",{href:"#order",children:"Order now"})})]}),Object(b.jsx)("div",{className:"col-6 item_right item p-0 d-flex justify-content-end align-items-center",children:Object(b.jsx)("img",{src:"assests/images/header.png",alt:"headre_picture"})})]})})})})})},x=c(3),O=c.n(x),h=c(6),p=c(10),f=c(7),v=c.n(f),g=c(46),N=c(174),w=function(e){return function(){var t=Object(h.a)(O.a.mark((function t(c){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/cart/find/".concat(e));case 3:a=t.sent,console.log(a.data),c(y(a.data)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),c(_(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return{type:"CartItems",payload:e}},_=function(e){return{type:"AddError",payload:e}},S=c(8),z=c(30),k=c.n(z),E=function(e){var t=e.pizza,c=Object(j.b)(),a=Object(S.g)(),s=JSON.parse(localStorage.getItem("document")),r=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=5;break}new k.a({type:"error",text:"Please login to add item",timeout:1e3,progressBar:!1}).show(),a.push("/login"),e.next=15;break;case 5:return e.prev=5,e.next=8,v.a.post("/cart/add",Object(g.a)(Object(g.a)({},t),{},{customerId:s._id}));case 8:new k.a({type:"success",text:"Item added to cart",timeout:1e3,progressBar:!1}).show(),c(w(s._id)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),new k.a({type:"error",text:"Something went wrong",timeout:1e3,progressBar:!1}).show();case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 pizza ",children:Object(b.jsxs)("div",{className:"paper text-center mb-4 p-xl-3 p-md-0 p-3",children:[Object(b.jsx)("img",{src:"assests/images/".concat(t.image),alt:"pizza"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h5",{children:t.name}),Object(b.jsx)("p",{children:t.size}),Object(b.jsxs)("div",{className:"d-flex align-items-center justify-content-between px-3",children:[Object(b.jsxs)("p",{className:"m-0 price",children:["\u20b9 ",t.price]}),Object(b.jsx)(o.a,{variant:"outlined",startIcon:Object(b.jsx)(N.a,{}),className:"paper_btn",onClick:r,children:"Add"})]})]})]})})})},I=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(null),n=Object(p.a)(r,2),l=n[0],i=n[1];return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(h.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/menu/find");case 3:c=t.sent,e||(s(c.data.pizzas),i(null)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e||i("Something went wrong");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[s]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:"container-fluid pizzaItem py-5",id:"order",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-10 mx-auto",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("h4",{className:"pb-4",children:"All pizzas"}),l?Object(b.jsx)("h1",{children:l}):Object(b.jsx)(b.Fragment,{children:c.map((function(e){return Object(b.jsx)(E,{pizza:e},e._id)}))})]})})})})})},C=function(){var e=Object(j.b)(),t=JSON.parse(localStorage.getItem("document"));Object(a.useEffect)((function(){try{e(w(t._id))}catch(c){}}),[e,t])},F=function(){return C(),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u,{}),Object(b.jsx)(I,{})]})},A=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useState)(null),s=Object(p.a)(c,2),r=s[0],n=s[1],l=Object(S.g)();C();var i=function(){var c=Object(h.a)(O.a.mark((function c(a){var s,r;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),s={email:t.current.value,password:e.current.value},c.prev=2,c.next=5,v.a.post("/user/login",s);case 5:200===(r=c.sent).status&&(localStorage.setItem("document",JSON.stringify(r.data)),window.location.reload(),setTimeout((function(){l.push("/")}),1e3)),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(2),n(c.t0.response.data),setTimeout((function(){n(null)}),2e3);case 13:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(e){return c.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid form ",id:"login",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xl-3 col-lg-4 col-md-5 col-sm-6 col-10 form_col  mx-auto  d-flex align-items-center",children:Object(b.jsxs)("form",{className:" mx-auto shadow w-100  p-3",onSubmit:i,children:[r?Object(b.jsx)("small",{className:"text-danger",children:r}):null,Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",ref:t})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",ref:e})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(b.jsx)(o.a,{type:"submit",className:"btn",children:"Login"}),Object(b.jsx)(d.b,{to:"/register",children:"Register to login"})]})]})})})})})},P=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useState)(null),r=Object(p.a)(s,2),n=r[0],l=r[1],i=Object(S.g)();C();var j=function(){var a=Object(h.a)(O.a.mark((function a(s){var r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),r={name:e.current.value,email:c.current.value,password:t.current.value},a.prev=2,a.next=5,v.a.post("/user/register",r);case 5:200===a.sent.status&&i.push("/login"),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(2),l(a.t0.response.data),setTimeout((function(){l(null)}),2e3),"User already exists"===a.t0.response.data&&s.target.reset();case 14:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid form ",id:"login",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-xl-3 col-lg-4 col-md-5 col-sm-6 col-11 form_col  mx-auto  d-flex align-items-center",children:Object(b.jsxs)("form",{className:" mx-auto shadow  p-3",onSubmit:j,children:[n?Object(b.jsx)("small",{className:"text-danger",children:n}):null,Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Your name",ref:e})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(b.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",ref:c})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",ref:t})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(b.jsx)(o.a,{type:"submit",className:"btn",children:"Register"}),Object(b.jsx)(d.b,{to:"/login",children:"Already have an account?"})]})]})})})})})},R=c(175),T=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid  cart ",children:Object(b.jsx)("div",{className:"row flex-grow-1",children:Object(b.jsx)("div",{className:"col-10 cart_col mx-auto   d-flex align-items-center justify-content-center text-center",children:Object(b.jsxs)("div",{className:"emptyCartContainer ",children:[Object(b.jsxs)("div",{className:"empty",children:[Object(b.jsxs)("h2",{children:["Cart Empty ",Object(b.jsx)(R.a,{className:"sad"})]}),Object(b.jsx)("p",{className:"m-0",children:"You haven't ordered a pizza yet."}),Object(b.jsx)("p",{children:"To order go to home page."})]}),Object(b.jsx)("div",{className:"emptyImgContainer mx-auto d-sm-block d-none",children:Object(b.jsx)("img",{src:"assests/images/empytCart.png",alt:""})}),Object(b.jsxs)(o.a,{variant:"contained",className:"btn mt-3",children:[" ",Object(b.jsx)(d.b,{to:"/",children:"Go Back"})," "]})]})})})})})},D=c(176),J=c(177),L=function(e){var t=e.pizzas,c=Object(j.b)(),a=t.pizza,s=t.qty,r=JSON.parse(localStorage.getItem("document")),n=function(){var e=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a._id,e.next=3,v.a.delete("/cart/decrement/".concat(t));case 3:c(w(r._id));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/cart/increment",a);case 2:c(w(r._id));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pizzaId:a.pizzaId,customerId:a.customerId},e.next=3,v.a.post("/cart/removePizza",t);case 3:c(w(r._id));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"order d-flex flex-sm-row flex-column align-items-center justify-content-between mb-4 border-top border-bottom py-3",children:[Object(b.jsxs)("div",{className:"order_type d-flex flex-sm-row flex-column align-items-center mb-sm-0 mb-3",children:[Object(b.jsx)("img",{src:"assests/images/header.png",alt:"",className:"img-fluid mb-sm-0 mb-1"}),Object(b.jsxs)("div",{className:"ms-3 text-sm-left text-center",children:[Object(b.jsx)("h6",{className:"m-0 fw-bold",children:a.name}),Object(b.jsx)("p",{className:"m-0 text-uppercase",children:a.size})]})]}),Object(b.jsxs)("div",{className:"order_qty_mng d-flex align-items-center border mb-sm-0 mb-3",children:[Object(b.jsx)(o.a,{className:"button  px-0",onClick:n,children:Object(b.jsx)(D.a,{})}),Object(b.jsx)("h6",{className:" fw-bold m-0",children:s}),Object(b.jsx)(o.a,{className:"button px-0 text",onClick:l,children:Object(b.jsx)(N.a,{})})]}),Object(b.jsx)("h6",{className:" fw-bold m-0",children:"\u20b9 ".concat(a.price*s)}),Object(b.jsx)(o.a,{className:"remove",onClick:i,children:Object(b.jsx)(J.a,{})})]})})},B=function(){var e=Object(j.c)((function(e){return e.cartReducer})),t=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(S.g)(),r=Object(a.useState)(null),n=Object(p.a)(r,2),l=n[0],d=n[1],m=JSON.parse(localStorage.getItem("document")),u=function(){var a=Object(h.a)(O.a.mark((function a(r){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,n={customerId:m._id,address:t.current.value,number:c.current.value,items:e},a.next=5,v.a.post("/order/place",n);case 5:new k.a({type:"success",text:"Order places successfully",timeout:1e3,progressBar:!1}).show(),s.push("/orders"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),d("Someting went wrong"),setTimeout((function(){d(null)}),1e3);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid  full_cart",children:Object(b.jsx)("div",{className:"row flex-grow-1",children:Object(b.jsx)("div",{className:"col-10 py-5  mx-auto ",children:Object(b.jsxs)("div",{className:"order_container mx-auto",children:[Object(b.jsxs)("h5",{className:" fw-bold",children:[Object(b.jsx)(i.a,{})," Order summary"]}),0!==e.totalQty&&e.item.map((function(e){return Object(b.jsx)(L,{pizzas:e},e.pizza.pizzaId)})),Object(b.jsxs)("div",{className:"order_bottom text-end",children:[Object(b.jsxs)("h6",{className:"fw-bold mb-4",children:["Total Amount: ",Object(b.jsx)("span",{children:e.totalPrice})]}),Object(b.jsxs)("form",{onSubmit:u,children:[l?Object(b.jsx)("small",{className:"text-danger",children:l}):null,Object(b.jsx)("input",{type:"text",placeholder:"Address",className:"mb-2 ms-auto form-control",ref:t}),Object(b.jsx)("input",{type:"text",placeholder:"Mobile No.",className:"mb-2 ms-auto form-control",ref:c}),Object(b.jsx)(o.a,{type:"submit",variant:"contained",className:"btn",children:"Order Now"})]})]})]})})})})})},W=function(){var e=Object(j.c)((function(e){return e.cartReducer})),t=Object(j.b)(),c=JSON.parse(localStorage.getItem("document"));return Object(a.useEffect)((function(){t(w(c._id))}),[t,c._id]),Object(b.jsx)(b.Fragment,{children:0!==e.totalQty?Object(b.jsx)(B,{}):Object(b.jsx)(T,{})})},q=c(24),Q=c.n(q),M=function(e){var t=e.myOrders;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsxs)("table",{className:"table  table-bordered ",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orders"}),Object(b.jsx)("th",{scope:"col",children:"Address"}),Object(b.jsx)("th",{scope:"col",children:"Time"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"order_id",children:Object(b.jsx)(d.b,{to:"/status/".concat(e._id),className:"text-danger",children:e._id})}),Object(b.jsx)("td",{children:e.address}),Object(b.jsx)("td",{children:Q()(e.createdAt).format("hh:mm A")})]},e._id)}))})]})})})},U=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(null),n=Object(p.a)(r,2),l=n[0],i=n[1],o=JSON.parse(localStorage.getItem("document"));return C(),Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(h.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/order/place/".concat(o._id));case 3:c=t.sent,e||(s(c.data),i(null)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e||i("Somethig went wrong");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[o._id]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)("div",{className:"row flex-grow-1",children:Object(b.jsxs)("div",{className:"col-10 py-5  mx-auto ",children:[Object(b.jsx)("h5",{className:" fw-bold mb-3",children:"All Orders"}),l?Object(b.jsx)("h2",{className:" fw-bold mb-3 text-center",children:l}):c.length?Object(b.jsx)(M,{myOrders:c}):Object(b.jsx)("h2",{className:" fw-bold mb-3 text-center",children:"No order placed yet"})]})})})})},X=c(35),V=function(e){var t=e.allOrders,c=t._id,a=t.status,s=t.customerId,r=t.createdAt,n=t.address,l=t.items,i=function(){var e=Object(h.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.target.value,e.next=4,v.a.post("/admin/order/status",{value:a,_id:c});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),new k.a({type:"error",text:"something went wrong",timeout:700,progressBar:!1}).show(),window.location.reload();case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("td",{children:[Object(b.jsx)("p",{className:"m-0",children:c}),Object(b.jsx)("div",{children:l.item.map((function(e){return Object(b.jsx)("p",{className:"m-0",children:"".concat(e.pizza.name," - ").concat(e.qty)},e.pizza._id)}))})]}),Object(b.jsx)("td",{children:s.name}),Object(b.jsx)("td",{children:n}),Object(b.jsx)("td",{children:Object(b.jsxs)("form",{action:"/admin/order/status",method:"POST",id:"form",children:[Object(b.jsx)("input",{type:"hidden"}),Object(b.jsxs)("select",{className:"form-select","aria-label":"Default select example",name:"select",defaultValue:a,onChange:i,children:[Object(b.jsx)("option",{value:"order_placed",children:"Placed"}),Object(b.jsx)("option",{value:"Confirmed",children:"Confirmed"}),Object(b.jsx)("option",{value:"Prepared",children:"Prepared"}),Object(b.jsx)("option",{value:"Delivered",children:"Delivered"}),Object(b.jsx)("option",{value:"Completed",children:"Completed"})]})]})}),Object(b.jsx)("td",{children:Q()(r).format("hh:mm A")})]})},Y=function(e){var t=e.allOrders;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"table-responsive",children:Object(b.jsxs)("table",{className:"table  table-bordered  align-middle",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Orders"}),Object(b.jsx)("th",{scope:"col",children:"Customers"}),Object(b.jsx)("th",{scope:"col",children:"Address"}),Object(b.jsx)("th",{scope:"col",children:"Status"}),Object(b.jsx)("th",{scope:"col",children:"Place at"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsx)("tr",{children:Object(b.jsx)(V,{allOrders:e})},e._id)}))})]})})})},G=c(52),H=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(null),n=Object(p.a)(r,2),l=n[0],i=n[1];return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(h.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.get("/admin/order");case 3:c=t.sent,e||s(c.data),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[]),Object(a.useEffect)((function(){i(Object(G.io)("ws://localhost:5000"))}),[]),Object(a.useEffect)((function(){null===l||void 0===l||l.emit("join","adminRoom")}),[l]),Object(a.useEffect)((function(){null===l||void 0===l||l.on("orderPlaced",(function(e){var t=Object(X.a)(c);t.unshift(e),s(t)}))}),[l,c]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)("div",{className:"row flex-grow-1",children:Object(b.jsx)("div",{className:"col-lg-10 col-12 py-5  mx-auto ",children:c.length?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{className:" fw-bold mb-3",children:"All Orders"}),Object(b.jsx)(Y,{allOrders:c})]}):Object(b.jsx)("h2",{className:" fw-bold mb-3 text-center",children:"No order placed yet"})})})})})},K=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)([]),n=Object(p.a)(r,2),l=n[0],i=n[1],o=Object(a.useState)(null),d=Object(p.a)(o,2),j=d[0],m=d[1],u=Object(S.h)().id,x=JSON.parse(localStorage.getItem("document"));return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(h.a)(O.a.mark((function t(){var c,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c={userId:x._id},e){t.next=8;break}return t.next=5,v.a.post("/order/status/".concat(u),c);case 5:a=t.sent,i(a.data),m(null);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e||m("Something went wrong");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[u,x]),Object(a.useEffect)((function(){var e=document.getElementsByClassName("order_status");Object(X.a)(e).forEach((function(e){e.classList.remove("step_completed"),e.classList.remove("current")})),Object(X.a)(e).forEach((function(e){if(e.dataset.status===l.status){for(var t=e;t;)t.classList.add("step_completed"),t=t.previousElementSibling;e.classList.add("step_completed"),e.nextElementSibling&&e.nextElementSibling.classList.add("current")}}))})),Object(a.useEffect)((function(){s(Object(G.io)("ws://localhost:5000"))}),[]),Object(a.useEffect)((function(){l._id&&(null===c||void 0===c||c.emit("join","order_".concat(l._id)))}),[c,l]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("orderUpdated",(function(e){var t=Object(g.a)({},l);t.updatedAt=Q()().format(),t.status=e.status,i(t)}))}),[c,l]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container-fluid ",children:Object(b.jsx)("div",{className:"row flex-grow-1 order_status_container",children:Object(b.jsx)("div",{className:"col-10   mx-auto  d-flex align-items-center",children:Object(b.jsx)("div",{className:"row order_status_box flex-grow-1",children:Object(b.jsxs)("div",{className:"col-lg-8 col-md-10 col-12 mx-auto  ",children:[Object(b.jsxs)("div",{className:"status_heading  d-flex flex-sm-row flex-column  justify-content-between py-4 px-0 text-center",children:[Object(b.jsx)("h4",{className:"fw-bold",children:"Track delivery status"}),Object(b.jsx)("h6",{className:"text-success bg-light px-2 py-1 rounded d-inline",children:u})]}),j?Object(b.jsx)("h1",{children:j}):Object(b.jsxs)("ul",{className:"list-unstyled",children:[Object(b.jsxs)("li",{className:"order_status pb-5  ","data-status":"order_placed",children:[Object(b.jsx)("span",{children:"Order placed"}),Object(b.jsx)("small",{children:"order_placed"===l.status?Q()(l.updatedAt).format("hh:mm A"):null})]}),Object(b.jsxs)("li",{className:"order_status pb-5 ","data-status":"Confirmed",children:[Object(b.jsx)("span",{children:"Order confirmed"}),Object(b.jsx)("small",{children:"Confirmed"===l.status?Q()(l.updatedAt).format("hh:mm A"):null})]}),Object(b.jsxs)("li",{className:"order_status pb-5 ","data-status":"Prepared",children:[Object(b.jsx)("span",{children:"Preparation"}),Object(b.jsx)("small",{children:"Prepared"===l.status?Q()(l.updatedAt).format("hh:mm A"):null})]}),Object(b.jsxs)("li",{className:"order_status pb-5","data-status":"Delivered",children:[Object(b.jsx)("span",{children:"Out for delivery"}),Object(b.jsx)("small",{children:"Delivered"===l.status?Q()(l.updatedAt).format("hh:mm A"):null})]}),Object(b.jsxs)("li",{className:"order_status pb-5","data-status":"Completed",children:[Object(b.jsx)("span",{children:"Complete"}),Object(b.jsx)("small",{children:"Completed"===l.status?Q()(l.updatedAt).format("hh:mm A"):null})]})]})]})})})})})})},Z=function(){var e=JSON.parse(localStorage.getItem("document"));return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(m,{}),Object(b.jsxs)(S.d,{children:[Object(b.jsx)(S.b,{exact:!0,path:"/",component:F}),Object(b.jsx)(S.b,{path:"/register",children:e?Object(b.jsx)(S.a,{to:"/"}):Object(b.jsx)(P,{})}),Object(b.jsx)(S.b,{path:"/login",children:e?Object(b.jsx)(S.a,{to:"/"}):Object(b.jsx)(A,{})}),Object(b.jsx)(S.b,{path:"/orders",children:e?Object(b.jsx)(U,{}):Object(b.jsx)(S.a,{to:"/"})}),Object(b.jsx)(S.b,{path:"/order",children:e&&"admin"===e.role?Object(b.jsx)(H,{}):Object(b.jsx)(S.a,{to:"/"})}),Object(b.jsx)(S.b,{path:"/cart",children:e&&"customer"===e.role?Object(b.jsx)(W,{}):Object(b.jsx)(S.a,{to:"/"})}),Object(b.jsx)(S.b,{path:"/status/:id",children:e&&"customer"===e.role?Object(b.jsx)(K,{}):Object(b.jsx)(S.a,{to:"/"})}),Object(b.jsx)(S.a,{to:"/"})]})]})},$=c(36),ee={items:[],totalQty:0,totalPrice:0},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CartItems":var c=t.payload,a={};c.map((function(e){return a.hasOwnProperty(e.pizzaId)?a[e.pizzaId].qty+=1:a[e.pizzaId]={pizza:e,qty:1}}));var s=Object.keys(a).map((function(e){return a[e]}));return s.sort((function(e,t){return e.pizza.name<t.pizza.name?-1:0})),{item:Object(X.a)(s),totalQty:c.length,totalPrice:c.reduce((function(e,t){return e+t.price}),0)};case"AddError":return t.payload;default:return e}},ce=Object($.b)({cartReducer:te}),ae=c(90),se=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),re=Object($.d)(ce,Object($.c)(Object($.a)(ae.a),se));n.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(j.a,{store:re,children:Object(b.jsx)(d.a,{children:Object(b.jsx)(Z,{})})})}),document.getElementById("root"))},97:function(e,t,c){}},[[157,1,2]]]);
//# sourceMappingURL=main.df0cad6f.chunk.js.map